<p *ngIf="!q">Loading... </p>
<div *ngIf="q">
  <mat-card class="mw-300 color">
    <mat-card-header>
      <mat-card-title *ngIf="!modificerOn" #createTitle>Crear consulta</mat-card-title>
      <mat-card-title *ngIf="modificerOn" #modifiTitle>Modificar consulta {{q.name}}</mat-card-title>
    </mat-card-header>
  </mat-card>
  <mat-card class="mw-300 b-r-b m-t-n10">
    <mat-card-content>
        <form [formGroup]="questionForm">
          <!-- Name -->
            <mat-form-field>
              <mat-label>Nombre</mat-label>
              <input matInput
                    type="text"
                    name="name"
                    formControlName="name"
                    [errorStateMatcher]="matcher"
                    placeholder="Tino DÃ­az"
                    maxlength="200"
                    required>
                    <mat-error *ngIf="!questionForm.get('name').errors?.required"
                              class="form-control-feedback">
                          El correo electronico es necesario.
                    </mat-error>
            </mat-form-field>
          <!-- End Name -->
          <!-- Email -->
            <mat-form-field>
              <mat-label>Email</mat-label>
              <input matInput 
                    [errorStateMatcher]="matcher"
                    formControlName="email"
                    placeholder="Ex. pat@example.com" 
                    required>
              <mat-error  *ngIf="!questionForm.get('email').errors?.required"
                          class="form-control-feedback">
                        El nombre es necesario.
              </mat-error>
              <mat-error  *ngIf="!questionForm.get('email').errors?.minlenght"
                          class="form-control-feedback">
                    El correo electronico contiene errores.
              </mat-error>

            </mat-form-field>
          <!-- End Email -->
          <!-- Broker -->
            <div *ngIf="modificerOn" class="m-b-20">
              <mat-label>Broker: </mat-label>
              <mat-label>{{q.broker}}</mat-label>
            </div>
            <mat-form-field *ngIf="!modificerOn">
              <input type="text"
                    placeholder="Broker"
                    aria-label="Number"
                    formControlName="broker"
                    matInput             
                    [matAutocomplete]="auto">
                    
              <mat-autocomplete #auto="matAutocomplete">
                <mat-option *ngFor="let broker of brokers" [value]="broker">
                  {{broker}}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
          <!-- Broker End -->
          <!-- Phone -->
            <mat-form-field>
              <mat-label>Telephone</mat-label>
              <span matPrefix>+1 &nbsp;</span>
              <input [errorStateMatcher]="matcher"
                    formControlName="phone"
                    matInput
            
                    placeholder="54911-3334-1234">
              <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
          <!-- End Phone -->
          <!-- Message -->
            <mat-form-field appearance="fill">
              <mat-label>Mensaje</mat-label>
              <textarea matInput
            
                        [errorStateMatcher]="matcher"
                        formControlName="message"
                        name="message"></textarea>
            </mat-form-field>
          <!-- End Message -->
        </form>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button (click)="clearQuestion()">Borrar</button>
      <button mat-button *ngIf="!modificerOn" (click)="create()" class="color">Agregar</button>   
      <button mat-button *ngIf="modificerOn" (click)="edit()" class="color">Modicar</button>   
    </mat-card-actions>
  </mat-card>
</div>